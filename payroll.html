<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.1/css/all.min.css"/>
    <link rel="stylesheet" href="/style.css" />
    <title>Simple Payroll</title>
  </head>


  <style>
    table, th, td {
      border:1px solid rgb(27, 19, 9);
      margin: auto;
    }
    tr:nth-child(even){background-color: #f2f2f2;}
    tr:nth-child(odd){background-color: #e6bf7c;}
  
    th {
            padding-top: 12px;
            padding-bottom: 12px;
            text-align: left;
            background-color: #333f4f;
            color: white;
    }
    </style>
  
  <body onload="initcart()">
    <div class="menu-bar">
      <h1 class="logo">Arj's<span>Website.</span></h1>
      <ul>
        <li><a href="/index.html">Home</a></li>
        <li><a href="#">Conversion <i class="fas fa-caret-down"></i></a>

            <div class="dropdown-menu">
                <ul>
                  <li><a href="/CtoF.html">Celsius to Fahrenheit</a></li>
                  <li><a href="/FtoC.html">Fahrenheit to Celsius</a></li>
                  <li><a href="/MtoFt.html">Meters to Feet</a></li>
                  <li><a href="/FttoM.html">Feet to Meters</a></li>
                </ul>
              </div>
        </li>

        <li><a href="/tax.html">Tax Calculator</a></li>
        <li><a href="#">Loops <i class="fas fa-caret-down"></i></a>

            <div class="dropdown-menu2">
                <ul>
                  <li><a href="/factorial.html">Factorial</a></li>
                  <li><a href="/sum.html">Sum</a></li>
                  <li><a href="/average.html">Average</a></li>
                </ul>
            </div>
        </li>
        
        <li><a href="/payroll.html">Simple Payroll</a></li>
      </ul>
    </div>
  
  <h1>Payroll Maker</h1>
  <br>
  
  <p>
  <label for="itemdesc">Employee Name:</label>    
  <input name="itemdesc" id="itemdesc"></input>
  
  <label for="qty">Days Worked:</label>
  <input id="qty" name="qty" type="number" oninput="computeamount()"></input>
  
  <label for="price">Daily Rate:</label>
  <input id="price" name="price" type="number" oninput="computeamount()"></input>
  
  <label for="deduct">Deduction Amount:</label>
  <input id="deduct" name="deduction" type="number" oninput="computeamount()"></input>
  
  <label for="amount">Gross Pay:</label>
  <input id="amount" name="amount" type="number" readonly></input>
  <button onclick="addtocart()">Add to List</button>
  </p>
  
  <p>
  <label for="items">Payroll List Items:</label>
  <input id="items" name="items" type="number" readonly></input>
  <button onclick="clearcart()">Clear List</button>

  <label for="delitem">Delete Item:</label>
  <input id="delitem" name="delitem" type="number" ></input>
  <button onclick="deleteitem()" >Delete</button>  
  </p>
  
  <p id="cart"></p>
  <script>
  
  
     
      function initcart(){
          cart=[];
          document.getElementById("items").value=cart.length;
          document.getElementById("cart").innerHTML="";
  
              
      }
  
     
      function clearcart(){
          var toclear;
  
          toclear=confirm("Delete all item(s) from cart ?");
  
          if (toclear) {
               initcart();
          }
              
      }
  
   
      function addtocart(){
           
           var cartitem = {
               "item": "1",
               "price": 0,
               "qty": 1,
               "deduct": 1,
              "itemamount" : function itemamount(){
                   return Math.round((this.price*this.qty)-this.deduct);  
                 }
              };
  
            cartitem.item=document.getElementById("itemdesc").value;
            cartitem.qty=document.getElementById("qty").value;
            cartitem.price=document.getElementById("price").value;
            cartitem.deduct=document.getElementById("deduct").value;
  
            console.log(cartitem.item);
            console.log(cartitem.qty);
            console.log(cartitem.price);
            console.log(cartitem.deduct);
  
  
             cart.push(cartitem);

  
            console.log(cart.length);
            document.getElementById("items").value=cart.length;
  
            showcart();
  
      }
  

      function computeamount() {
            var q,p,q,d;
            q = document.getElementById("qty").value*1;
            p = document.getElementById("price").value*1;
            d = document.getElementById("deduct").value*1;
  
            a = Math.round((q*p)-d); 
  
            console.log(a);
  
            document.getElementById("amount").value=a;
          
      }    
      

      function deleteitem(){
          var todelete;
          var itemno;
  
          itemno=document.getElementById("delitem").value;
  
          todelete=confirm("Delete item no. "+itemno+"?");
  
          if (todelete) {
  
              cart.splice(itemno-1,1);
              document.getElementById("items").value=cart.length;
               showcart();   
          }
  
      }

      function showcart(){
  
          var i,l,carttext,totalamount,ln;
          var theader,tbody,tb,tfooter;
  
  
          theader ="<thead>";
          theader+="<tr>";
          theader+="<th>No.</th>";
          theader+='<th style="text-align:center">Employee Name</th>';
          theader+="<th style=text-align:center>Days Worked</th>";
          theader+='<th style="text-align:center">Daily Rate</th>';
          theader+="<th style=text-align:center>Deduction</th>";
          theader+="<th style=text-align:center>Gross Pay</th>";
          theader+="</tr>";
          theader+="</thead>";
          

          l = cart.length;
        
          
          for (i=0,totalamount=0,carttext="",tbody='';i<l;i++){
              ln=i+1;    
              tbody += "<tr>"
                  +'<td style="text-align:center">'+ln+' </td>'
                  +'<td>'+cart[i].item+' </td>'
                  +'<td style="text-align:right">'+cart[i].qty+'</td>'
                  +'<td style="text-align:right">'+cart[i].price+'</td>'
                  +'<td style="text-align:right">'+cart[i].deduct+'</td>'
                  +'<td style="text-align:right">'+cart[i].itemamount()+'</td>'                
                  +"</tr>";
                         
              totalamount+=cart[i].itemamount();
            
  
          }

          tfooter ="<tfoot>";
          tfooter+="<tr>";
          tfooter+='<th style="text-align:center">'+cart.length+'</th>';
          tfooter+='<th style="text-align:left">Items</th>';
          tfooter+='<th></th>';
          tfooter+='<th></th>';
          tfooter+='<th>Total Amount</th>';
          tfooter+='<th style="text-align:right">'+totalamount+'</th>';
          tfooter+="</tr>";
          tfooter+="</tfoot>";
  
         console.log(theader+tbody+tfooter);
          document.getElementById("cart").innerHTML=
             "<table>"+theader+tbody+tfooter+"</table>";
  
  
      }
    

  var cart = []; 
  
  </script>
  </body>
  </html>